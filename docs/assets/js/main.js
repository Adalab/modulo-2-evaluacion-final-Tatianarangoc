"use strict";const inputElement=document.querySelector(".js_input"),btnElement=document.querySelector(".js_btn"),listElement=document.querySelector(".js_list"),listElementFavorites=document.querySelector(".js_favoriteList");let allCharaters=[],favouritesCharaters=[];function renderCharacterList(e){let t;return t=-1===favouritesCharaters.findIndex(t=>t.char_id===parseInt(e.char_id))?"":"selected",`\n\n  <li >  \n  <article class="js_cards ${t}  cards" id="${e.char_id}">\n  <h2 class="cards_name"> ${e.name}</h2>\n  <img class="cards_img" src=${e.img} class="img">\n  <p class="cards_text" >${e.status}</p>\n  </article>\n  </li>\n `}function renderAllCharacters(){let e="";console.log(allCharaters.length);for(let t=0;t<allCharaters.length;t++)e+=renderCharacterList(allCharaters[t]);listElement.innerHTML=e,addArticlesListeners()}function renderFavouriteCharacters(){let e="";console.log(allCharaters.length);for(let t=0;t<favouritesCharaters.length;t++)e+=renderCharacterList(favouritesCharaters[t]);listElementFavorites.innerHTML=e}function addArticlesListeners(){const e=document.querySelectorAll(".js_cards");for(const t of e)t.addEventListener("click",handleclick)}function handleclick(e){e.currentTarget.classList.toggle("selected");const t=allCharaters.find(t=>t.char_id===parseInt(e.currentTarget.id)),r=favouritesCharaters.findIndex(t=>t.char_id===parseInt(e.currentTarget.id));console.log(r),-1===r?(favouritesCharaters.push(t),localStorage.setItem("favorites",JSON.stringify(favouritesCharaters))):(favouritesCharaters.splice(r,1),localStorage.setItem("favorites",JSON.stringify(favouritesCharaters))),renderFavouriteCharacters()}function getCharactersApi(e){fetch("https://breakingbadapi.com/api/characters?name="+e).then(e=>e.json()).then(e=>{allCharaters=e,renderAllCharacters()})}btnElement.addEventListener("click",e=>{e.preventDefault(),getCharactersApi(inputElement.value)}),inputElement.addEventListener("input",e=>{e.preventDefault(),getCharactersApi(inputElement.value)}),getCharactersApi("");const savedFavorites=JSON.parse(localStorage.getItem("favorites"));null!==savedFavorites&&(favouritesCharaters=savedFavorites,renderFavouriteCharacters());